import{M as fe,m as me,u as le,r as te,j as e,c as p,L as M,E as y,b as ge,R as _,S as ue,a as m,g as $,w as U,V as ke}from"./_virtual_settings-W9jktp4-.js";import{C as t,T as r,t as d,s as L}from"./styles-CIndU-LK.js";import{S as _e,b as w}from"./ArrayConstants-PhubJoph.js";import{z as xe,r as se,s as re}from"./utils-B3L5ltZ6.js";import{c as ee}from"./motion-BY56HOYq.js";import{u as we}from"./useRandom-BZdmpElt.js";import{C as u}from"./Circle-QFwxJpEl.js";import{L as C}from"./Line-BWJ8xhLn.js";let ie;ie??(ie=new fe("mergePhase",!1));ie.loadData({version:0,timeEvents:[],seed:2990217251});const be=ie,n={..._e};n.boxWidth/=1.2;n.boxGap/=1.5;function D(l,W,c){return()=>l().topLeft().addX(W*c)}function de(l,W,c){return()=>l().bottomLeft().addX(W*c)}function We(l,W,c,Z,o,g=4*n.outlineMargin,a=2*n.boxWidth,x=1){return[e(M,{ref:Z,opacity:x,topLeft:()=>l().bottomLeft().addX(-a/2).addY(g),width:W*w(n)-n.boxGap,height:()=>l().height()}),e(M,{ref:o,opacity:x,topRight:()=>l().bottomRight().addX(a/2).addY(g),width:c*w(n)-n.boxGap,height:()=>l().height()})]}function ce(l,W){return te(l().children().length-1).map(c=>e(C,{points:[l().children()[c].right().transformAsPoint(l().localToParent()),l().children()[c+1].left().transformAsPoint(l().localToParent())],...W}))}const V=me(function*(l){const W=le().variables.get("seed",42),c=le().variables.get("size",7)(),Z=we(W()),o=Math.floor(c/2);let g=te(c).map(i=>Z.nextInt(1,99));const a=[],x=p(),he=p(),B=p(),F=p(),H=p(),I=p();l.fill(t.background),l.add(e(M,{ref:x,opacity:1,width:g.length*w(n)-n.boxGap,y:-l.height()/2+n.boxWidth+2*n.outlineMargin,height:n.boxWidth})),l.add(We(x,o,g.length-o,B,H)),l.add([ee(x,he,t.surface,n.outlineMargin,1),ee(B,F,t.cyan,n.outlineMargin,1),ee(H,I,t.yellow,n.outlineMargin,1)]),F().fill(new y(t.cyan).desaturate(.5).alpha(.1)),I().fill(new y(t.yellow).desaturate(.5).alpha(.1)),l.add(te(g.length).map(i=>e(_,{ref:ge(a,i),size:n.boxWidth,lineWidth:n.boxStrokeWidth,stroke:t.surface,fill:t.background,radius:n.boxRadius,topLeft:D(x,i,w(n)),alignItems:"center",justifyContent:"center",children:e(r,{text:g[i].toString(),...d})})));const J=p(),K=p(),N=p();l.add(Array.from(xe([J,K,N],[t.cyan,t.yellow,t.pink])).map(([i,s])=>e(u,{ref:i,fill:s,stroke:new y(s).darken(2),size:20,lineWidth:4,opacity:0})));const Y=p(),E=p(),oe=p(),ne=p(),O=p(),T=p(),v=p(),z=p(),R=p(),A={lineWidth:5,stroke:t.white,radius:10,padding:new ue(5,15),layout:!0,alignItems:"center",justifyContent:"center"},S={lineWidth:5,stroke:t.white,lineDash:[5,5],radius:5};l.add(e(M,{ref:Y,children:[e(_,{ref:E,...A,x:-600,y:200,children:[e(M,{ref:oe,width:20,padding:[0,30]}),e(r,{ref:O,text:"<",...d,padding:[0,20],opacity:0}),e(M,{ref:ne,width:20,padding:[0,30]})]}),e(M,{ref:T,layout:!0,gap:40,left:()=>E().right().addX(100).addY(-70),children:[e(_,{...A,opacity:.5,children:[e(r,{text:"[",...d}),e(u,{fill:t.cyan,stroke:new y(t.cyan).darken(2),size:20,lineWidth:5}),e(r,{text:"] < [",...d}),e(u,{fill:t.yellow,stroke:new y(t.yellow).darken(2),size:20,lineWidth:5}),e(r,{text:"]",...d})]}),e(_,{...A,opacity:.5,children:[e(r,{text:"[",...d}),e(u,{fill:t.pink,stroke:new y(t.pink).darken(2),size:20,lineWidth:5}),e(r,{text:"] = [",...d}),e(u,{fill:t.cyan,stroke:new y(t.cyan).darken(2),size:20,lineWidth:5}),e(r,{text:"]",...d})]}),e(_,{...A,opacity:.5,children:[e(u,{fill:t.cyan,stroke:new y(t.cyan).darken(2),size:20,lineWidth:5}),e(r,{text:" + 1",...d,padding:[0,20]})]})]}),e(C,{points:[E().right(),T().left()],...S}),e(M,{ref:v,layout:!0,gap:40,left:()=>E().right().addX(100).addY(70),children:[e(_,{...A,opacity:.5,children:[e(r,{text:"[",...d}),e(u,{fill:t.cyan,stroke:new y(t.cyan).darken(2),size:20,lineWidth:5}),e(r,{text:"] > [",...d}),e(u,{fill:t.yellow,stroke:new y(t.yellow).darken(2),size:20,lineWidth:5}),e(r,{text:"]",...d})]}),e(_,{...A,opacity:.5,children:[e(r,{text:"[",...d}),e(u,{fill:t.pink,stroke:new y(t.pink).darken(2),size:20,lineWidth:5}),e(r,{text:"] = [",...d}),e(u,{fill:t.yellow,stroke:new y(t.yellow).darken(2),size:20,lineWidth:5}),e(r,{text:"]",...d})]}),e(_,{...A,opacity:.5,children:[e(u,{fill:t.yellow,stroke:new y(t.yellow).darken(2),size:20,lineWidth:5}),e(r,{text:" + 1",...d,padding:[0,20]})]})]}),e(C,{points:()=>[E().right(),v().left()],...S}),e(_,{ref:R,...A,opacity:.5,left:()=>T().right().addX(100).addY(70),children:[e(u,{fill:t.pink,stroke:new y(t.pink).darken(2),size:20,lineWidth:5}),e(r,{text:" + 1",...d,padding:[0,20]})]}),e(C,{...S,points:()=>[T().childAs(2).right().transformAsPoint(T().localToParent()),R().left()]}),e(C,{...S,points:()=>[v().childAs(2).right().transformAsPoint(v().localToParent()),R().left]}),e(M,{ref:z,opacity:.5,children:[e(_,{...A,position:v().bottom().addY(100),children:[e(r,{text:"While",...d,padding:[0,20]}),e(u,{fill:t.cyan,stroke:new y(t.cyan).darken(2),size:20,lineWidth:5}),e(r,{text:"< size(",...d,paddingLeft:20}),e(_,{fill:t.cyan,stroke:new y(t.cyan).darken(2),size:[60,30],radius:10,lineWidth:5}),e(r,{text:") &&",...d,paddingRight:20}),e(u,{fill:t.yellow,stroke:new y(t.yellow).darken(2),size:20,lineWidth:5}),e(r,{text:"< size(",...d,paddingLeft:20}),e(_,{fill:t.yellow,stroke:new y(t.yellow).darken(2),size:[60,30],radius:10,lineWidth:5}),e(r,{text:")",...d})]}),e(C,{...S,radius:200,points:()=>[R().bottom(),[R().bottom().x,z().childAs(0).right().y],z().childAs(0).right()]}),e(C,{...S,radius:200,endArrow:!0,points:()=>[z().childAs(0).left(),[E().bottom().x,z().childAs(0).left().y],E().bottom()]})]})]})),Y().add(ce(T,S)),Y().add(ce(v,S)),yield*m(L(.1,...a.slice(0,o).map(i=>i.stroke(t.cyan,.1))),L(.1,...a.slice(o).map(i=>i.stroke(t.yellow,.1)))),yield*m(L(.1,...a.slice(0,o).map((i,s)=>i.topLeft(D(B,s,w(n)),.2))),L(.1,...a.slice(o).map((i,s)=>i.topLeft(D(H,s,w(n)),.2))));{const i=se([...re(g.slice(0,o)),...re(g.slice(o)).map(k=>k+o)]),s=a.map(k=>k.position());yield*m(...i.map((k,q)=>a[q].position(s[k],.2)));const j=[...a];i.forEach((k,q)=>a[k]=j[q]);const X=[...g];i.forEach((k,q)=>g[k]=X[q])}yield*m(L(.1,...a.slice(0,o).map(i=>i.stroke(t.surface,.1))),L(.1,...a.slice(o).map(i=>i.stroke(t.surface,.1)))),yield*m(...[F,I].map(i=>i().stroke(t.surface,.1)));const h=$(0),f=$(0),b=$(0);J().position(()=>de(B,Math.min(h(),o-1),w(n))().addX(n.boxWidth/2).addY(n.outlineMargin)),K().position(()=>de(H,Math.min(f(),c-o-1),w(n))().addX(n.boxWidth/2).addY(n.outlineMargin)),N().position(()=>D(x,Math.min(b(),c-1),w(n))().addX(n.boxWidth/2).addY(-n.outlineMargin)),yield*m(...[J,K,N].map(i=>i().opacity(1,.3)));let G=Array(c);for(;h()<o&&f()<c-o;){a[h()].save(),a[f()+o].save();const i=a[h()].childAs(0).clone(),s=a[f()+o].childAs(0).clone();i.position(a[h()].childAs(0).absolutePosition().transformAsPoint(l.worldToLocal())),s.position(a[f()+o].childAs(0).absolutePosition().transformAsPoint(l.worldToLocal())),l.add([i,s]),yield*m(a[h()].stroke(t.cyan,.3),a[f()+o].stroke(t.yellow,.3),i.absolutePosition(oe().absolutePosition(),.3),i.fill(t.cyan,.3),s.absolutePosition(ne().absolutePosition(),.3),s.fill(t.yellow,.3));let j=g[h()]<g[f()+o];O().text(j?"<":">");const X=j?T:v;X().children().forEach(k=>k.save()),R().save(),yield*m(O().opacity(1,.3),X().children()[0].opacity(1,.3)),yield*U(.5),X().children()[1].save(),yield*X().children()[1].opacity(1,.3),yield*m(a[h()].restore(.3),a[f()+o].restore(.3),(j?a[h()]:a[f()+o]).topLeft(D(x,b(),w(n)),.3)),yield*X().children()[2].opacity(1,.3),G[b()]=j?h():f()+o,yield*(j?h:f)((j?h:f)()+1,.3),yield*R().opacity(1,.3),b()<c-1&&(yield*b(b()+1,.3)),z().save(),yield*z().opacity(1,.3),h()<o&&f()<c-o||(yield*z().childAs(0).stroke(t.red,.3),yield*U(.5)),yield*m(O().opacity(0,.3),i.opacity(0,.3),s.opacity(0,.3),L(.1,...X().children().map(k=>k.restore(.3)),R().restore(.3),z().restore(.3))),i.remove(),s.remove(),yield*U(.5)}yield*m(Y().opacity(0,.3),Y().y(Y().y()+50,.4)),Y().remove();const P=p();l.add(e(r,{...d,y:200,ref:P,text:"Move remaining elements"})),P().save(),P().opacity(0),P().y(P().y()+50),yield*P().restore(.3),yield*U(.5);const Q=h()<o?F:I;Q().save(),yield*Q().stroke(Q().stroke().brighten(4),.4),yield*Q().restore(.4);const ae=h()<o?a.slice(h(),o):a.slice(o+f());ae.forEach((i,s)=>G[b()+s]=h()<o?h()+s:o+f()+s),yield*m(L(.1,...ae.map((i,s)=>i.topLeft(D(x,b()+s,w(n)),.4))),b(c,.2*(c-b())),h()<o?h(o,.2*(o-h())):f(c-o,.2*(c-o-f()))),yield*m(m(...[F,I].map(i=>i().opacity(0,.3))),m(...[J,K,N].map(i=>i().opacity(0,.3)))),yield*m(P().opacity(0,.3),P().y(P().y()+50,.3),x().y(0,.3)),G=se(G);const pe=[...a];G.forEach((i,s)=>a[i]=pe[s]);const ye=[...g];G.forEach((i,s)=>g[i]=ye[s]),yield*L(.1,...a.map(i=>i.fill(t.green,.3)))});V.name="mergePhase";be.attach(V.meta);V.onReplaced??(V.onReplaced=new ke(V.config));export{V as d};

import{w as D,X as L,g as j,t as C,Y as O,u as w,Z as F,B as T,E as R,_ as N,F as S,$ as v,G as g,P as b,Q as A,H as B,a0 as z,a1 as P,a as W,a2 as E}from"./_virtual_settings-DVCYLlHS.js";function*$(t,...e){for(const n of e)yield n,yield*D(t);yield*L(...e)}function I(t,e=!0){return"number"==typeof t?new O(e?t:t+w().meta.seed.get()):w().random}j($,C());var y,u=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};let a=y=class extends F{constructor({children:t,...e}){super(e),t&&this.text(t)}parentTxt(){const t=this.parent();return t instanceof c?t:null}draw(t){this.requestFontUpdate(),this.applyStyle(t),this.applyText(t),t.font=this.styles.font,t.textBaseline="bottom","letterSpacing"in t&&(t.letterSpacing=`${this.letterSpacing()}px`);const e=t.measureText("").fontBoundingBoxAscent,n=this.element.getBoundingClientRect(),{width:i,height:s}=this.size(),r=document.createRange();let o="";const l=new T;for(const a of this.element.childNodes){if(!a.textContent)continue;r.selectNodeContents(a);const h=r.getBoundingClientRect(),c=i/-2+h.left-n.left,p=s/-2+h.top-n.top+e;l.y===p?(l.width+=h.width,o+=a.textContent):(this.drawText(t,o,l),l.x=c,l.y=p,l.width=h.width,l.height=h.height,o=a.textContent)}this.drawText(t,o,l)}drawText(t,e,n){const i=n.y;e=e.replace(/\s+/g," "),this.lineWidth()<=0?t.fillText(e,n.x,i):this.strokeFirst()?(t.strokeText(e,n.x,i),t.fillText(e,n.x,i)):(t.fillText(e,n.x,i),t.strokeText(e,n.x,i))}getCacheBBox(){const t=this.computedSize(),e=document.createRange();e.selectNodeContents(this.element);const n=e.getBoundingClientRect(),i=this.lineWidth(),s="miter"===this.lineJoin()?5:.5;return new T(-t.width/2,-t.height/2,n.width,n.height).expand([0,.5*this.fontSize()]).expand(i*s)}applyFlex(){super.applyFlex(),this.element.style.display="inline"}updateLayout(){if(this.applyFont(),this.applyFlex(),this.justifyContent.isInitial()&&(this.element.style.justifyContent=this.styles.getPropertyValue("text-align")),"nowrap"!==this.styles.whiteSpace&&"pre"!==this.styles.whiteSpace)if(this.element.innerText="",y.segmenter)for(const t of y.segmenter.segment(this.text()))this.element.appendChild(document.createTextNode(t.segment));else for(const t of this.text().split(""))this.element.appendChild(document.createTextNode(t));else if("pre"===this.styles.whiteSpace){this.element.innerText="";for(const t of this.text().split("\n"))this.element.appendChild(document.createTextNode(t+"\n"))}else this.element.innerText=this.text()}};u([R(""),N(v),S()],a.prototype,"text",void 0),u([g()],a.prototype,"parentTxt",null),u([b((()=>{const t=document.createElement("span");return A.shadowRoot.append(t),t}))],a,"formatter",void 0),u([b((()=>{try{return new Intl.Segmenter(void 0,{granularity:"grapheme"})}catch{return null}}))],a,"segmenter",void 0),a=y=u([B("TxtLeaf")],a),["fill","stroke","lineWidth","strokeFirst","lineCap","lineJoin","lineDash","lineDashOffset"].forEach((t=>{a.prototype[`get${z(t)}`]=function(){var e;return(null==(e=this.parentTxt())?void 0:e[t]())??this[t].context.getInitial()}}));var p,x=function(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o};let c=p=class extends F{static b(t){return new p({...t,fontWeight:700})}static i(t){return new p({...t,fontStyle:"italic"})}getText(){return this.innerText()}setText(t){const e=this.children();let n=null;for(let i=0;i<e.length;i++){const t=e[i];null===n&&t instanceof a?n=t:t.parent(null)}null===n?(n=new a({text:t}),n.parent(this)):n.text(t),this.setParsedChildren([n])}setChildren(t){this.children.context.raw()!==t&&("string"==typeof t?this.text(t):super.setChildren(t))}*tweenText(t,e,n,i){const s=this.children();(1!==s.length||!(s[0]instanceof a))&&this.text.save();const r=this.childAs(0),o=r.text.context.raw(),l=this.size.context.raw();r.text(t);const h=this.size();r.text(o??P),0===this.height()&&this.height(h.height),yield*W(this.size(h,e,n),r.text(t,e,n,i)),this.children.context.setter(t),this.size(l)}getLayout(){return!0}constructor({children:t,text:e,...n}){super(n),this.children(e??t)}innerText(){const t=this.childrenAs();let e="";for(const n of t)e+=n.text();return e}parentTxt(){const t=this.parent();return t instanceof p?t:null}parseChildren(t){const e=[],n=Array.isArray(t)?t:[t];for(const i of n)i instanceof p||i instanceof a?e.push(i):"string"==typeof i&&e.push(new a({text:i}));return e}applyFlex(){super.applyFlex(),this.element.style.display=this.findAncestor(E(p))?"inline":"block"}draw(t){this.drawChildren(t)}};x([R(""),S()],c.prototype,"text",void 0),x([C()],c.prototype,"tweenText",null),x([g()],c.prototype,"innerText",null),x([g()],c.prototype,"parentTxt",null),c=p=x([B("Txt")],c),["fill","stroke","lineWidth","strokeFirst","lineCap","lineJoin","lineDash","lineDashOffset"].forEach((t=>{c.prototype[`getDefault${z(t)}`]=function(e){var n;return(null==(n=this.parentTxt())?void 0:n[t]())??e}}));const U={whiteLabel:"rgba(255, 255, 255, 0.54)",background:"#141414",surface:"#242424",red:"#ef5350",green:"#8bc34a",blue:"#2196f3",transparent:"#00000000",cyan:"#00BCD4",pink:"#FF4081",yellow:"#FFC107",white:"#FFFFFF"},V={paddingTop:10,fontFamily:"JetBrains Mono",fill:"rgba(255, 255, 255, 0.8)"};export{U as C,c as T,$ as s,V as t,I as u};
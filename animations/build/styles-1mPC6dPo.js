import{w as _,X as L,P as j,D as C,Y as N,u as w,Z as F,B as T,z as R,_ as O,A as S,$ as A,E as g,K as b,N as v,F as z,a0 as B,a1 as P,a as W,a2 as E}from"./_virtual_settings-DUdUAYR1.js";j($,C());function*$(r,...e){for(const t of e)yield t,yield*_(r);yield*L(...e)}function I(r,e=!0){return typeof r=="number"?new N(e?r:r+w().meta.seed.get()):w().random}var u=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var o=r.length-1;o>=0;o--)(l=r[o])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},y;let a=y=class extends F{constructor({children:e,...t}){super(t),e&&this.text(e)}parentTxt(){const e=this.parent();return e instanceof c?e:null}draw(e){this.requestFontUpdate(),this.applyStyle(e),this.applyText(e),e.font=this.styles.font,e.textBaseline="bottom","letterSpacing"in e&&(e.letterSpacing=`${this.letterSpacing()}px`);const t=e.measureText("").fontBoundingBoxAscent,n=this.element.getBoundingClientRect(),{width:i,height:s}=this.size(),l=document.createRange();let o="";const h=new T;for(const f of this.element.childNodes){if(!f.textContent)continue;l.selectNodeContents(f);const d=l.getBoundingClientRect(),D=i/-2+d.left-n.left,m=s/-2+d.top-n.top+t;h.y===m?(h.width+=d.width,o+=f.textContent):(this.drawText(e,o,h),h.x=D,h.y=m,h.width=d.width,h.height=d.height,o=f.textContent)}this.drawText(e,o,h)}drawText(e,t,n){const i=n.y;t=t.replace(/\s+/g," "),this.lineWidth()<=0?e.fillText(t,n.x,i):this.strokeFirst()?(e.strokeText(t,n.x,i),e.fillText(t,n.x,i)):(e.fillText(t,n.x,i),e.strokeText(t,n.x,i))}getCacheBBox(){const e=this.computedSize(),t=document.createRange();t.selectNodeContents(this.element);const n=t.getBoundingClientRect(),i=this.lineWidth(),s=this.lineJoin()==="miter"?.5*10:.5;return new T(-e.width/2,-e.height/2,n.width,n.height).expand([0,this.fontSize()*.5]).expand(i*s)}applyFlex(){super.applyFlex(),this.element.style.display="inline"}updateLayout(){if(this.applyFont(),this.applyFlex(),this.justifyContent.isInitial()&&(this.element.style.justifyContent=this.styles.getPropertyValue("text-align")),this.styles.whiteSpace!=="nowrap"&&this.styles.whiteSpace!=="pre")if(this.element.innerText="",y.segmenter)for(const t of y.segmenter.segment(this.text()))this.element.appendChild(document.createTextNode(t.segment));else for(const t of this.text().split(""))this.element.appendChild(document.createTextNode(t));else if(this.styles.whiteSpace==="pre"){this.element.innerText="";for(const t of this.text().split(`
`))this.element.appendChild(document.createTextNode(t+`
`))}else this.element.innerText=this.text()}};u([R(""),O(A),S()],a.prototype,"text",void 0);u([g()],a.prototype,"parentTxt",null);u([b(()=>{const r=document.createElement("span");return v.shadowRoot.append(r),r})],a,"formatter",void 0);u([b(()=>{try{return new Intl.Segmenter(void 0,{granularity:"grapheme"})}catch{return null}})],a,"segmenter",void 0);a=y=u([z("TxtLeaf")],a);["fill","stroke","lineWidth","strokeFirst","lineCap","lineJoin","lineDash","lineDashOffset"].forEach(r=>{a.prototype[`get${B(r)}`]=function(){var e;return((e=this.parentTxt())==null?void 0:e[r]())??this[r].context.getInitial()}});var x=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var o=r.length-1;o>=0;o--)(l=r[o])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},p;let c=p=class extends F{static b(e){return new p({...e,fontWeight:700})}static i(e){return new p({...e,fontStyle:"italic"})}getText(){return this.innerText()}setText(e){const t=this.children();let n=null;for(let i=0;i<t.length;i++){const s=t[i];n===null&&s instanceof a?n=s:s.parent(null)}n===null?(n=new a({text:e}),n.parent(this)):n.text(e),this.setParsedChildren([n])}setChildren(e){this.children.context.raw()!==e&&(typeof e=="string"?this.text(e):super.setChildren(e))}*tweenText(e,t,n,i){const s=this.children();(s.length!==1||!(s[0]instanceof a))&&this.text.save();const l=this.childAs(0),o=l.text.context.raw(),h=this.size.context.raw();l.text(e);const f=this.size();l.text(o??P),this.height()===0&&this.height(f.height),yield*W(this.size(f,t,n),l.text(e,t,n,i)),this.children.context.setter(e),this.size(h)}getLayout(){return!0}constructor({children:e,text:t,...n}){super(n),this.children(t??e)}innerText(){const e=this.childrenAs();let t="";for(const n of e)t+=n.text();return t}parentTxt(){const e=this.parent();return e instanceof p?e:null}parseChildren(e){const t=[],n=Array.isArray(e)?e:[e];for(const i of n)i instanceof p||i instanceof a?t.push(i):typeof i=="string"&&t.push(new a({text:i}));return t}applyFlex(){super.applyFlex(),this.element.style.display=this.findAncestor(E(p))?"inline":"block"}draw(e){this.drawChildren(e)}};x([R(""),S()],c.prototype,"text",void 0);x([C()],c.prototype,"tweenText",null);x([g()],c.prototype,"innerText",null);x([g()],c.prototype,"parentTxt",null);c=p=x([z("Txt")],c);["fill","stroke","lineWidth","strokeFirst","lineCap","lineJoin","lineDash","lineDashOffset"].forEach(r=>{c.prototype[`getDefault${B(r)}`]=function(e){var t;return((t=this.parentTxt())==null?void 0:t[r]())??e}});const U={whiteLabel:"rgba(255, 255, 255, 0.54)",background:"#141414",surface:"#242424",red:"#ef5350",green:"#8bc34a",blue:"#2196f3",transparent:"#00000000",cyan:"#00BCD4",pink:"#FF4081",yellow:"#FFC107",white:"#FFFFFF"},V={paddingTop:10,fontFamily:"JetBrains Mono",fill:"rgba(255, 255, 255, 0.8)"};export{U as C,c as T,$ as s,V as t,I as u};

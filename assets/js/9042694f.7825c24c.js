"use strict";(self.webpackChunkprogramming_support_courses=self.webpackChunkprogramming_support_courses||[]).push([[9853],{7246:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var s=r(5893),i=r(1151);const t={title:"TD3 - Structures de donn\xe9es"},l=void 0,o={id:"TDs/S2/dataStructures",title:"TD3 - Structures de donn\xe9es",description:"Evaluation NPI",source:"@site/content/TDs/S2/03_dataStructures.md",sourceDirName:"TDs/S2",slug:"/TDs/S2/dataStructures",permalink:"/Learn--cpp_programming/TDs/S2/dataStructures",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"TD3 - Structures de donn\xe9es"},sidebar:"TDs",previous:{title:"TD2 - Algorithmes de tri",permalink:"/Learn--cpp_programming/TDs/S2/sorting"},next:{title:"TD4 - D\xe9duction de type et biblioth\xe8que standard",permalink:"/Learn--cpp_programming/TDs/S2/AutoAndAlgorithm"}},d={},c=[{value:"Evaluation NPI",id:"evaluation-npi",level:2},{value:"Pour aller plus loin",id:"pour-aller-plus-loin",level:3},{value:"Pour aller plus loin",id:"pour-aller-plus-loin-1",level:2},{value:"Conversion en NPI",id:"conversion-en-npi",level:3},{value:"R\xe9aliser un calculatrice",id:"r\xe9aliser-un-calculatrice",level:3}];function a(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"evaluation-npi",children:"Evaluation NPI"}),"\n",(0,s.jsxs)(n.p,{children:["La notation polonaise invers\xe9e (",(0,s.jsx)(n.strong,{children:"NPI"}),") est une notation math\xe9matique qui permet d'exprimer des expressions arithm\xe9tiques sans utiliser de parenth\xe8ses. Elle a \xe9t\xe9 invent\xe9e par le math\xe9maticien polonais Jan Lukasiewicz en 1924."]}),"\n",(0,s.jsxs)(n.p,{children:["La notation polonaise invers\xe9e est une notation postfixe, c'est-\xe0-dire que l'op\xe9rateur est plac\xe9 apr\xe8s les deux op\xe9randes. Par exemple, l'expression ",(0,s.jsx)(n.code,{children:"3 + 4"})," s'\xe9crit ",(0,s.jsx)(n.code,{children:"3 4 +"})," en NPI."]}),"\n",(0,s.jsx)(n.p,{children:"Ce qui permet ensuite d'interpr\xe9ter l'expression de gauche \xe0 droite, en empilant les op\xe9randes sur une pile, et en d\xe9clenchant l'op\xe9ration lorsque l'on rencontre un op\xe9rateur."}),"\n",(0,s.jsxs)(n.p,{children:["Par exemple, l'expression ",(0,s.jsx)(n.code,{children:"3 4 +"})," s'interpr\xe8te comme suit :"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["On empile ",(0,s.jsx)(n.code,{children:"3"})]}),"\n",(0,s.jsxs)(n.li,{children:["On empile ",(0,s.jsx)(n.code,{children:"4"})]}),"\n",(0,s.jsxs)(n.li,{children:["On rencontre ",(0,s.jsx)(n.code,{children:"+"}),", on d\xe9pile ",(0,s.jsx)(n.code,{children:"4"})," et ",(0,s.jsx)(n.code,{children:"3"}),", on calcule ",(0,s.jsx)(n.code,{children:"3 + 4 = 7"}),", et on empile le r\xe9sultat ",(0,s.jsx)(n.code,{children:"7"})]}),"\n",(0,s.jsxs)(n.li,{children:["On a termin\xe9, le r\xe9sultat est ",(0,s.jsx)(n.code,{children:"7"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["On va donc pouvoir se servir d'une ",(0,s.jsx)(n.strong,{children:"pile"})," pour \xe9valuer une expression en NPI."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Il faut cependant faire attention au op\xe9rateur non commutatifs, comme ",(0,s.jsx)(n.code,{children:"-"})," ou ",(0,s.jsx)(n.code,{children:"/"}),". ",(0,s.jsx)(n.code,{children:"3 4 /"})," ne s'interpr\xe8te pas comme ",(0,s.jsx)(n.code,{children:"3 / 4"}),", mais comme ",(0,s.jsx)(n.code,{children:"4 / 3"}),". Il faut donc \xe9crire ",(0,s.jsx)(n.code,{children:"3 4 /"})," pour \xe9valuer ",(0,s.jsx)(n.code,{children:"3 / 4"}),"."]})}),"\n",(0,s.jsxs)(n.p,{children:["Le but de cet exercice est d'\xe9crire une fonction qui prend en param\xe8tre une expression en ",(0,s.jsx)(n.strong,{children:"NPI"})," sous forme d'une cha\xeene de caract\xe8res (les diff\xe9rents \xe9l\xe9ments de l'expression sont s\xe9par\xe9s par des espaces), et qui retourne le r\xe9sultat de l'expression."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\xc9crire un programme qui permet de lire une entr\xe9e utilisateur sous la forme d'une chaines de caract\xe8res compos\xe9e des diff\xe9rents \xe9l\xe9ments de l'expression (nombre, op\xe9rateur) en ",(0,s.jsx)(n.strong,{children:"notation polonaise invers\xe9e"})," (",(0,s.jsx)(n.strong,{children:"NPI"}),")."]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Par simplicit\xe9, on se limitera \xe0 des expressions contenant des ",(0,s.jsx)(n.strong,{children:"chiffres"})," entiers positifs compris entre ",(0,s.jsx)(n.strong,{children:"0"})," et ",(0,s.jsx)(n.strong,{children:"9"}),", et des op\xe9rateurs ",(0,s.jsx)(n.code,{children:"+"}),", ",(0,s.jsx)(n.code,{children:"-"}),", ",(0,s.jsx)(n.code,{children:"*"})," et ",(0,s.jsx)(n.code,{children:"/"})," ainsi que des ",(0,s.jsx)(n.strong,{children:"parenth\xe8ses"})," (",(0,s.jsx)(n.code,{children:"("})," et ",(0,s.jsx)(n.code,{children:")"}),").\nla cha\xeene de caract\xe8res sera donc compos\xe9e uniquement des caract\xe8res suivants: ",(0,s.jsx)(n.code,{children:"0123456789+-*/"})," sans espaces(pour s'\xe9viter d'avoir \xe0 g\xe9rer les espaces dans un premier temps). ","\u26a0\ufe0f"," ",(0,s.jsx)(n.code,{children:"12"})," repr\xe9sente donc bien la succession des chiffres ",(0,s.jsx)(n.code,{children:"1"})," et ",(0,s.jsx)(n.code,{children:"2"}),", et non pas le nombre ",(0,s.jsx)(n.code,{children:"12"}),"."]})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["\xc9crire une fonction qui prend en param\xe8tre une ",(0,s.jsx)(n.strong,{children:"cha\xeene de caract\xe8res"})," repr\xe9sentant l'expression en ",(0,s.jsx)(n.strong,{children:"NPI"})," et qui retourne le r\xe9sultat de l'expression.\nUtilisez une ",(0,s.jsx)(n.strong,{children:"pile"})," (",(0,s.jsx)(n.code,{children:"std::stack"}),") pour \xe9valuer l'expression comme dans l'exemple pr\xe9c\xe9dent."]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["On pourra faire la distinction entre les op\xe9rateurs et les op\xe9randes en utilisant la fonction ",(0,s.jsx)(n.code,{children:"std::isdigit"})," de la biblioth\xe8que ",(0,s.jsx)(n.code,{children:"<cctype>"}),".\nOn pourra utiliser la fonction ",(0,s.jsx)(n.code,{children:"std::stoi"})," de la biblioth\xe8que ",(0,s.jsx)(n.code,{children:"<string>"})," pour convertir une cha\xeene de caract\xe8res en entier."]})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:"Utiliser les fonctions pr\xe9c\xe9dentes pour afficher le r\xe9sultat d'une expression en NPI entr\xe9e par l'utilisateur."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"pour-aller-plus-loin",children:"Pour aller plus loin"}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsxs)(n.li,{children:["G\xe9rer les nombres (\xe0 plusieurs chiffres) (il va falloir ajouter un espace entre chaque \xe9l\xe9ments de l'expression et ajouter une \xe9tape de traitement pour s\xe9parer l'expression en plusieurs nombres et op\xe9rateurs (appel\xe9s ",(0,s.jsx)(n.strong,{children:"tokens"}),") en fonction des espaces)."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Je vous fourni le code suivant pour vous aider \xe0 tester si une cha\xeene de caract\xe8res repr\xe9sente un nombre entier:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'#include <string>\n#include <cctype>\n#include <algorithm>\n#include <iostream>\n\nbool is_digits(std::string const& str)\n{\n  return std::all_of(str.begin(), str.end(), [](unsigned char ch){ return std::isdigit(ch); });\n}\n\nvoid main() {\n  std::string s { "42" };\n  if (is_digits(s))\n  {\n    int i { std::stoi(s) };\n    std::cout << i << std::endl;\n  }\n  else\n  {\n    // opertor\n    std::cout << "not a number" << std::endl;\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["R\xe9\xe9crire le programme pr\xe9c\xe9dent en utilisant un ",(0,s.jsx)(n.strong,{children:"enum"})," pour repr\xe9senter les diff\xe9rents ",(0,s.jsx)(n.strong,{children:"op\xe9rateurs"})," ainsi qu'une structure pour repr\xe9senter un ",(0,s.jsx)(n.strong,{children:"token"})," (un \xe9l\xe9ment de l'expression) avec un champ pour le type (op\xe9rateur ou op\xe9rande) et des champs pour les valeurs (op\xe9rateur ou op\xe9rande)."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"enum class Operator { ADD, SUB, MUL, DIV};\nenum class TokenType { OPERATOR, OPERAND };\nstruct Token {\n  TokenType type;\n  int value;\n  Operator op;\n};\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Il existe des fonctionnalit\xe9s plus avanc\xe9s qui permettraient de faire \xe7a plus proprement, et de se passer de la structure ",(0,s.jsx)(n.code,{children:"Token"})," (les ",(0,s.jsx)(n.strong,{children:"variantes"}),"). Vous pouvez vous renseigner ou me demander si vous voulez en savoir plus."]})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"pour-aller-plus-loin-1",children:"Pour aller plus loin"}),"\n",(0,s.jsx)(n.h3,{id:"conversion-en-npi",children:"Conversion en NPI"}),"\n",(0,s.jsxs)(n.p,{children:["Nous avons pr\xe9c\xe9demment vu comment \xe9valuer une expression en ",(0,s.jsx)(n.strong,{children:"NPI"}),'. Mais comment faire pour convertir une expression en notation infixe (c\'est-\xe0-dire de mani\xe8re "classique" avec des parenth\xe8ses) en une expression en NPI ?']}),"\n",(0,s.jsxs)(n.p,{children:["Pour cela, il existe un algorithme appel\xe9 ",(0,s.jsx)(n.strong,{children:"Shunting-yard algorithm"}),' (litt\xe9ralement "algorithme de la cour de triage").']}),"\n",(0,s.jsxs)(n.p,{children:["Son principe est d'utiliser une ",(0,s.jsx)(n.strong,{children:"pile"})," pour stocker les op\xe9rateurs rencontr\xe9s, et de les d\xe9piler lorsque l'on rencontre un op\xe9rateur de priorit\xe9 sup\xe9rieure."]}),"\n",(0,s.jsx)(n.p,{children:"Voil\xe0 comment il fonctionne :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"On parcourt l'expression de gauche \xe0 droite"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Si on rencontre un nombre, on l'ajoute \xe0 la sortie"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Si on rencontre un op\xe9rateur:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Si on rencontre une parenth\xe8se ouvrante (",(0,s.jsx)(n.code,{children:"("}),"), on la met sur la pile des op\xe9rateurs"]}),"\n",(0,s.jsxs)(n.li,{children:["Si on rencontre une parenth\xe8se fermante (",(0,s.jsx)(n.code,{children:")"}),"), on d\xe9pile les op\xe9rateurs jusqu'\xe0 ce qu'on rencontre une parenth\xe8se ouvrante, et on ajoute les op\xe9rateurs d\xe9fil\xe9s \xe0 la sortie"]}),"\n",(0,s.jsx)(n.li,{children:"Tant qu'il y a un op\xe9rateur sur la pile des op\xe9rateurs de priorit\xe9 sup\xe9rieure ou \xe9gale \xe0 l'op\xe9rateur courant, on d\xe9pile les op\xe9rateurs et on les ajoute \xe0 la sortie. Puis on ajoute l'op\xe9rateur courant \xe0 la pile des op\xe9rateurs."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Enfin, on d\xe9pile les op\xe9rateurs restants et on les ajoute \xe0 la sortie."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Voici un exemple d'application de l'algorithme  avec l'expression ",(0,s.jsx)(n.code,{children:"3 + 4 ^ 2 / ( 1 - 5 ) ^ 6 "})," :"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Entr\xe9e"}),(0,s.jsx)(n.th,{children:"Sortie"}),(0,s.jsx)(n.th,{children:"Pile des op\xe9rateurs"}),(0,s.jsx)(n.th,{children:"commentaire"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"3"}),(0,s.jsx)(n.td,{children:"3"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"on ajoute 3 \xe0 la sortie"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"+"}),(0,s.jsx)(n.td,{children:"3"}),(0,s.jsx)(n.td,{children:"+"}),(0,s.jsx)(n.td,{children:"on ajoute + \xe0 la pile des op\xe9rateurs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"4"}),(0,s.jsx)(n.td,{children:"3 4"}),(0,s.jsx)(n.td,{children:"+"}),(0,s.jsx)(n.td,{children:"on ajoute 4 \xe0 la sortie"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"^"}),(0,s.jsx)(n.td,{children:"3 4"}),(0,s.jsx)(n.td,{children:"+ ^"}),(0,s.jsx)(n.td,{children:"on ajoute ^ \xe0 la pile des op\xe9rateurs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"2"}),(0,s.jsx)(n.td,{children:"3 4 2"}),(0,s.jsx)(n.td,{children:"+ ^"}),(0,s.jsx)(n.td,{children:"on ajoute 2 \xe0 la sortie"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"/"}),(0,s.jsx)(n.td,{children:"3 4 2 ^"}),(0,s.jsx)(n.td,{children:"+"}),(0,s.jsx)(n.td,{children:"on d\xe9pile ^ et on l'ajoute \xe0 la sortie car / a une priorit\xe9 inf\xe9rieure \xe0 ^"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"("}),(0,s.jsx)(n.td,{children:"3 4 2 ^"}),(0,s.jsx)(n.td,{children:"+ ("}),(0,s.jsx)(n.td,{children:"on ajoute ( \xe0 la pile des op\xe9rateurs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"3 4 2 ^ 1"}),(0,s.jsx)(n.td,{children:"+ ("}),(0,s.jsx)(n.td,{children:"on ajoute 1 \xe0 la sortie"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"3 4 2 ^ 1"}),(0,s.jsx)(n.td,{children:"+ ( -"}),(0,s.jsx)(n.td,{children:"on ajoute - \xe0 la pile des op\xe9rateurs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"5"}),(0,s.jsx)(n.td,{children:"3 4 2 ^ 1 5"}),(0,s.jsx)(n.td,{children:"+ ( -"}),(0,s.jsx)(n.td,{children:"on ajoute 5 \xe0 la sortie"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:")"}),(0,s.jsx)(n.td,{children:"3 4 2 ^ 1 5 -"}),(0,s.jsx)(n.td,{children:"+"}),(0,s.jsx)(n.td,{children:"on d\xe9pile les op\xe9rateurs jusqu'\xe0 ( et on les ajoute \xe0 la sortie"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"^"}),(0,s.jsx)(n.td,{children:"3 4 2 ^ 1 5 -"}),(0,s.jsx)(n.td,{children:"+ ^"}),(0,s.jsx)(n.td,{children:"on ajoute ^ \xe0 la pile des op\xe9rateurs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"6"}),(0,s.jsx)(n.td,{children:"3 4 2 ^ 1 5 - 6"}),(0,s.jsx)(n.td,{children:"+ ^"}),(0,s.jsx)(n.td,{children:"on ajoute 6 \xe0 la sortie"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"3 4 2 ^ 1 5 - 6 ^"}),(0,s.jsx)(n.td,{children:"+"}),(0,s.jsx)(n.td,{children:"on d\xe9pile le reste des op\xe9rateurs et on les ajoute \xe0 la sortie"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["\xc9crire une fonction qui prend en param\xe8tre une cha\xeene de caract\xe8res repr\xe9sentant une expression en ",(0,s.jsx)(n.strong,{children:"notation infixe"}),", qui retourne un tableau de ",(0,s.jsx)(n.code,{children:"Token"})," repr\xe9sentant l'expression en NPI."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["On utilisera la m\xeame structure ",(0,s.jsx)(n.code,{children:"Token"})," que dans l'exercice pr\xe9c\xe9dent.\nIl faut ajouter les parenth\xe8ses \xe0 la liste des op\xe9rateurs, et g\xe9rer la propri\xe9t\xe9 des op\xe9rateurs(en ordonnant les op\xe9rateurs par priorit\xe9 dans l'\xe9num\xe9ration ",(0,s.jsx)(n.code,{children:"Operator"})," par exemple ou \xe0 l'aide d'une fonction ou d'un tableau pour d\xe9terminer la priorit\xe9 d'un op\xe9rateur).\nOn utilisera une ",(0,s.jsx)(n.code,{children:"std::stack"})," pour repr\xe9senter la pile des op\xe9rateurs."]})}),"\n",(0,s.jsx)(n.h3,{id:"r\xe9aliser-un-calculatrice",children:"R\xe9aliser un calculatrice"}),"\n",(0,s.jsxs)(n.p,{children:["Maintenant que nous savons \xe9valuer une expression en NPI et que nous savons convertir une expression en notation infixe en NPI, nous pouvons r\xe9aliser une ",(0,s.jsx)(n.strong,{children:"calculatrice"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Essayez de r\xe9aliser un programme qui permet de lire une expression en notation infixe, de la convertir en NPI, de l'\xe9valuer et d'afficher le r\xe9sultat."})]})}function u(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>o,a:()=>l});var s=r(7294);const i={},t=s.createContext(i);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);